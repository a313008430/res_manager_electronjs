!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("fs")):"function"==typeof define&&define.amd?define(["fs"],e):(t=t||self,t.game=e(t.fs))}(this,function(t){"use strict";class e{constructor(){this.groupList=new Map,this.allType=new Set}addGroup(t){this.groupList.set(t,new Map)}clearGroup(t){let e=this.groupList.get(t);e&&e.size&&this.groupList.delete(t)}}class i{constructor(){this.rootResList=new Map,this.dataManager=new e,this.browseBtn=document.querySelector("#browse"),this.groupListNode=document.querySelector("#groupListNode"),this.addGroupBtn=document.querySelector("#addGroupBtn"),this.myListNode=document.querySelector("#myListNode"),this.browseBtn.addEventListener("change",e=>{let i=this.browseBtn.files.item(0);if("application/json"===i.type){let e=i.path,o=e.split("\\");o.splice(o.length-2,2);let s=o.join("/")+"/assets/resources";if(this.setRootPath(s),t.existsSync(s)){this.clear(),this.dataManager.root=s,this.readDir(s),this.drawRootList();let e=t.readFileSync(i.path).toString();e.length?e=JSON.parse(e):(console.log("json文件为空"),this.addGroup("init",!1))}else alert("root path is error!");console.log(s)}else alert("The format must be JSON!");console.log(i)}),this.addGroupBtn.addEventListener("click",()=>{var t=prompt("请输入您的名字","Bill Gates");console.log(t)})}addGroup(t,e){if(this.dataManager.groupList.has(t))return void alert("分组已经存在");this.dataManager.addGroup(t);let i=document.createElement("DD");i.className="tag g1 is-white",i.innerHTML=`<input ${e?"":"disabled"} class="input is-small groupName" type="text" placeholder="Group name" value=${t}>\r\n        ${e?' <button class="delete is-small"></button>':""}`,this.groupListNode.appendChild(i)}clear(){this.rootResList.clear(),this.groupListNode.innerHTML="",this.myListNode.innerHTML=""}setRootPath(t){document.querySelector("#rootNode").innerText=t}drawRootList(){console.log(this.rootResList);let t="";this.rootResList.forEach((e,i)=>{t+=`<dd data-id=${i} data-type=${e.type}>\r\n                <div class="g0 resName">${e.name}</div>\r\n                <div class="g0 resType select is-small">\r\n                    <select disabled>\r\n                        <option>${e.type}</option>\r\n                    </select>\r\n                </div>\r\n                <div class="g1">${this.dataManager.root+e.path} <a class="delete is-small"></a></div>\r\n                <div class="g0 size_me">${this.convertFileSize(e.size)}</div>\r\n            </dd>`}),document.querySelector("#rootList").innerHTML=t}readDir(e){if(e.length){let i=t.readdirSync(e);for(let o=i.length-1;o>-1;o--)if(-1===i[o].indexOf(".meta")){let s=t.statSync(e+"/"+i[o]);if(s.isDirectory())this.readDir(e+"/"+i[o]);else if(s.isFile()){let t=i[o].replace("_","").split(".");this.dataManager.allType.add(t[1]);let n=(e+"/"+i[o]).replace(this.dataManager.root+"","");this.rootResList.set(n,{name:t.join("_"),path:n,type:t[1],size:s.size})}}}}convertFileSize(t){return t/=1e3,t<1024?t.toFixed(2)+"KB":(t/=1e3).toFixed(2)+"MB"}}class o{constructor(){new i}}return new o,o});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbXSwic291cmNlc0NvbnRlbnQiOltdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIn0=
